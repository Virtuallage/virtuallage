<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/template/main_template.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:sec="http://www.springframework.org/security/tags">
	
<ui:define name="title">
Sales  Cancellation
</ui:define>

<ui:define name="content">	

<p:panel id="panel" header="Sales Cancellation - #{salesCancel.project.projectName} #{salesCancel.inventory.blockNo} #{salesCancel.inventory.unitNo}" style="width:95%">  
    
<p:focus context="panel"/> 
   <h:form >
   		<h:panelGrid columns="4" style="width:70%">
   			<p:outputLabel value="Project Name"/>
   			<p:outputLabel value="#{salesCancel.project.projectName}"/>
   			<p:outputLabel value="Unit No."/>
   			<p:outputLabel value="#{salesCancel.inventory.blockNo}  #{salesCancel.inventory.unitNo}"/>
   			
   			<p:outputLabel value="Purchaser Name"/>
   			<p:outputLabel value="#{salesCancel.customerNames}"/>
   			<p:outputLabel value="Reg. No."/>
   			<p:outputLabel value="#{salesCancel.account.accountId}"/>
   			
   			<p:outputLabel value="Registration Fee Paid"/>
   			<h:outputText value="#{salesCancel.account.registrationFee}">
   				<f:convertNumber type="currency" currencySymbol="" />
   			</h:outputText>
   			<p:outputLabel value="Date Registered."/>
   			<h:outputText value="#{salesCancel.account.datePurchased}">
   				<f:convertDateTime pattern="dd/MM/yyyy"/>
   			</h:outputText>
   			
   			<p:outputLabel value="Reason for Cancellation" for="cancelReason"/>
   				<p:selectOneMenu id="cancelReason" value="#{salesCancel.account.cancelledReason}" required="true">
   					<f:selectItems value="#{salesCancel.cancelReasons}"/>
   				</p:selectOneMenu>
   			<p:outputLabel value="Payment Method"/>
   			<p:outputLabel value="#{salesCancel.bookTrx.paymentMethod}"/>
   			
   			<p:outputLabel value="Cancellation Fee" for="cancelFee"/>
   			<p:inputText id="cancelFee" value="#{salesCancel.account.cancelFee}" required="true" autocomplete="off">
   				<f:convertNumber maxFractionDigits="2" />
                <p:ajax update="cancelFee" event="blur" process="cancelFee"/>
   			</p:inputText>
			<p:outputLabel value=""/>
			<p:outputLabel value=""/>
   			
   			
   			<p:outputLabel value="Tax" for="cancelTax"/>
   			<p:inputText id="cancelTax" value="#{salesCancel.account.cancelTax}" required="true" autocomplete="off">
   				<f:convertNumber maxFractionDigits="2" />
                <p:ajax update="cancelTax" event="blur" process="cancelTax"/>
   			</p:inputText>
   			<p:outputLabel value=""/>
   			<p:outputLabel value=""/>
   			
   			<p:outputLabel value="Net Refund Amount" for="cancelNetRefundAmt"/>
   			<h:outputText id="cancelNetRefundAmt" value="#{salesCancel.account.cancelNetRefundAmt}" >
   				<f:convertNumber type="currency" currencySymbol="" />
   			</h:outputText>
   			<p:outputLabel value=""/>
   			<p:outputLabel value=""/>
   			
   			
   		</h:panelGrid>
   		
   		<p:commandButton value="Back" action="#{salesCancel.listPropertyUnits}" ajax="false" immediate="true" icon="ui-icon-arrowreturn-1-w"/>  &nbsp;&nbsp;
    	<p:commandButton value="Pay" action="#{salesCancel.cancel}" ajax="false" icon="ui-icon-disk"/> &nbsp;&nbsp;
   
	</h:form> 
	
	<br/>
	<br/>
	<br/>
	<br/>
	<h:form>
		
		<h:panelGrid columns="2">
			<p:outputLabel value="Cancellation Letter"/>
   			<h:panelGroup>
   				<h:form enctype="multipart/form-data">
   				<p:fileUpload value="#{salesCancel.file}"  mode="advanced" sizeLimit="512000"  auto="true"  fileUploadListener="#{salesCancel.upload}"/>
   				
   				<p:commandButton id="downloadLink" value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop)"   
    			    icon="ui-icon-arrowthichk-s">  
  		 		 <p:fileDownload value="#{salesCancel.file}" />  
				</p:commandButton>  
  

  
		        <script type="text/javascript">  
					function start() {  
					    statusDialog.show();  
					}  
					  
					function stop() {  
					    statusDialog.hide();  
					}  
		        </script>  
         
   				</h:form>   
   			</h:panelGroup>
   			
		</h:panelGrid>
	</h:form>

</p:panel>

</ui:define>

</ui:composition>